[RDS 유지보수에 대하여]
대표적인 RDS Maintenance로 아래 3가지가 있습니다. 링크[1]

1.하드웨어 유지 관리
2.OS 유지 관리
3.DB 엔진 유지 관리

Q1 : 예정된 유지 관리 일정을 어떻게 확인하는 지 알고 싶습니다.

→ 1)Email notification 2)PHD

작업일정, 적용대상 인스턴스ID, 인스턴스의 AZ가 포함되어 알림이 발송됩니다.

Q2 : 예정된 작업 일정을 연기하고 싶습니다.

→ 일반적인 업데이트는 업그레이드 보류를 통해 무한정으로 연기가 가능하나, 일부 업데이트는 무기한 보류할 수 없습니다. (예 : 필수 OS 업데이트 , 버전 폐기로 인한 업그레이드)

1)업데이트를 연기하고자 하는 경우

유지 관리 기간으로 설정된 값이 반영이 되기 때문에, 해당 일정을 미루고 싶다면 해당 RDS에서 "수정"탭을 클릭한 뒤에 유지 관리 기간을 다음 유지 관리 기간에 적용되도록 설정하면 됩니다.

[1]유지관리 기간을 늘리신 후, 적용 날짜에 반영이 된다면 날짜를 유예하는 것이 가능하지만 이를 반복적으로 수행하실 경우 해당 업그레이드 작업이 랜덤한 시간대에 갑자기 적용 될 수 있습니다. [2]

[2]만약 적용 날짜에 반영이 안된다면 기간 변경이 불가능한 항목입니다.

이와 같이 연기가 어려운 업데이트의 경우 TAM을 통해서 일부 예외적인 연기가 가능한 경우도 있습니다.

Q3 : 업데이트 작업 수행 시 가동 중지 시간이 얼마나 발생하나요? 가동중지를 막을 수 있나요?

→해당 RDS의 구성상황에 따라 다릅니다. 또한 가동 중지 시간이 얼마나 발생할지 명확히 파악하는 것은 상당히 어려운 부분입니다.

예를 들어 AZ 구성의 경우

(1)Single-AZ(단일 가용영역)의 경우 몇 분 동안 사용할 수 없습니다.

(2)Multi-AZ(다중 가용영역)의 경우 failover를 완료하는 데 걸리는 시간(일반적으로 약 60초) 동안 사용할 수 없습니다.

→ 가동 중지를 완벽히 막을 수는 없습니다. 그러므로 일반적으로 사용량이 적은 새벽 시간대 등에 작업을 권장드립니다.

Q4 : RDS hardware maintenace가 예정되어 있습니다. 그런데 예정된 날짜에 업그레이드를 진행하고 싶지 않습니다. 어떻게 하면 될까요?

→만약 예정되어 있는 날짜에 작업이 이루어지는 것을 원하지 않으신다면, 예정 시간보다 앞서 작업 가능한 시간에 미리 Stop and Start하도록 안내 드립니다. [1]인스턴스를 stop, start 할 경우 새로운 하드웨어에 할당됩니다. [2]할당된 호스트에 예정된 하드웨어 작업이 삭제됩니다. [3]작업이 완료되었으므로 RDS hardware maintenance scheduled 목록에 나타나지 않습니다.(간혹 여전히 표시되는 경우가 있습니다. 이 부분의 경우 AWS에 확인 과정을 거치게 됩니다.)

Q5-1 : 자동 마이너 버전 업그레이드 옵션에 대해 궁금합니다.

-> 사용하는 DB의 현재 버전이 기본 마이너 버전보다 낮은 버전일 경우 Amazon RDS는 마이너 버전 업그레이드를 권장합니다. 이전 버전에서 알려진 보안 취약점을 해결하고 수많은 버그 수정, 성능 개선 등의 이점이 있어 최신 마이너 버전으로 업그레이드 하는 것을 권장하고 있습니다.자동 마이너 업그레이드 활성화 시 유지 보수 기간에 별도의 설정없이 자동 업그레이드가 진행된다는 장점이 있습니다.

그러나 해당 작업은 다운 타임이 발생하여 서비스에 영향을 줄 수 있다는 단점이 있습니다. 일반적으로 자동 마이너 업그레이드 비활성화하여 수동으로 업그레이드 하는 것을 권장 드리며, 업그레이드 전에 충분한 테스트를 진행하시도록 안내드립니다.

Q5-2 : 자동 마이너 버전 업그레이드 옵션을 비활성화 하는 경우 자동 업그레이드가 확실히 일어나지 않는다고 이해할 수 있을까요?

→ 아닙니다. 사용중인 DB의 버전이 Deprecated Version(오래된 버전, 폐기 예정)일 경우 RDS측에서 더 이상 지원하지 않는 DB이기에 auto minor version upgrade 옵션과는 관계없이 공지되는 일정에 따라 업그레이드가 불가피하게 진행됩니다.

*RDS 업데이트 관련 유지 보수에 대해서는 아래와 같이 사용하실 것을 권장드립니다.

1.RDS 자동 마이너 버전 업그레이드를 비활성화 합니다.(활성화 시 자동 업그레이드가 적용되며 가동 중지가 발생하기 때문입니다.)

2.RDS 업데이트 유지 보수가 예정되어 있는 경우, 예정된 시간보다 앞서 사용량이 적은 시간대에 작업을 수행하실 것을 권장 드립니다.

(”다음 유지 관리 기간에 적용”옵션을 선택하여 연기하여도 일부 업데이트는 반영이 되지 않거나, 특정 시간에 갑자기 업데이트가 적용되는 위험성이 있기 때문입니다.)

3.만약 시스템 호환성 등의 문제로 인해 RDS 업데이트 시 운영중인 시스템에 상당히 치명적일 경우, AWS와 소통하여 일부 예외적인 처리를 해 드릴 수 있으니 저희 기술지원팀에 문의주시기 바랍니다.

[참고 링크]

[1]https://aws.amazon.com/ko/premiumsupport/knowledge-center/rds-required-maintenance/

[2]https://aws.amazon.com/ko/premiumsupport/knowledge-center/rds-maintenance-window/
